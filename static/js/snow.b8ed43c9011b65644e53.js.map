{"version":3,"sources":["webpack:///src/pages/snow/index.vue","webpack:///./src/pages/snow/index.vue?b19e","webpack:///./src/pages/snow/index.vue","webpack:///./src/pages/snow/router.js","webpack:///./src/pages/snow/entry.js"],"names":["snow","name","mounted","this","initCanvas","methods","THREE","window","renderer","WebGLRenderer","antialias","setSize","document","getElementById","appendChild","domElement","scene","Scene","camera","PerspectiveCamera","position","set","lookAt","Vector3","add","planeGeometry","PlaneBufferGeometry","translate","planeTexture","TextureLoader","load","planeMaterial","MeshBasicMaterial","map","plane","Mesh","texture","materials","_i","material","PointsMaterial","size","transparent","opacity","depthTest","blending","AdditiveBlending","offset","Vector2","repeat","push","geoms","k","geom","Geometry","_i2","v","Math","random","range","velocityY","velocityX","velocityZ","vertices","clouds","i","points","Points","animate","forEach","geometry","idx","y","x","z","verticesNeedUpdate","render","requestAnimationFrame","pages_snow","_h","$createElement","_self","_c","staticClass","attrs","id","staticRenderFns","router","routes","path","component","__webpack_require__","normalizeComponent","ssrContext","createApp","pageRouter","app","onReady","$mount"],"mappings":"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","file":"static/js/snow.b8ed43c9011b65644e53.js","sourcesContent":["<template>\n  <div id=\"snowBackground\" class=\"snow\">\n\n  </div>\n</template>\n<script>\nexport default {\n  name: 'Snow',\n  mounted () {\n    this.initCanvas()\n  },\n  methods: {\n    initCanvas () {\n      var THREE = window.THREE\n      var width = 550 // 画布的宽度\n      var height = 366 // 画布的高度\n\n      // 渲染器\n      var renderer = new THREE.WebGLRenderer({antialias: true})\n      renderer.setSize(width, height)\n      // 将canvas添加到指定元素\n      var element = document.getElementById('snowBackground')\n      element.appendChild(renderer.domElement)\n\n      // 场景\n      var scene = new THREE.Scene()\n      // 正交投影摄像机\n      var camera = new THREE.PerspectiveCamera(45, width / height, 2, 500)\n      camera.position.set(0, 0, 40)\n      // 照相机默认沿z轴负方向观察，通过设置lookAt的位置可以改变观察的方向\n      camera.lookAt(new THREE.Vector3(0, 0, 0))\n      scene.add(camera)\n\n      /* 背景 */\n      // 平面几何体\n      var planeGeometry = new THREE.PlaneBufferGeometry(width, height)\n      planeGeometry.translate(0, 0, -400) // 平面几何体位置\n      // 背景纹理\n      var planeTexture = new THREE.TextureLoader().load('/static/img/snow_bg.jpg')\n      // 背景材料\n      var planeMaterial = new THREE.MeshBasicMaterial({\n        map: planeTexture\n      })\n      // 背景网格\n      var plane = new THREE.Mesh(planeGeometry, planeMaterial)\n      // 将背景添加到场景\n      scene.add(plane)\n\n      /* 雪花 */\n      var typeNum = 2 // 雪花种类\n      var range = 50 // 雪花出现范围\n\n      // 雪花纹理\n      var texture = new THREE.TextureLoader().load('/static/img/snowflake.png')\n\n      // 使用图片纹理材质\n      var materials = []\n      for (let i = 0; i < typeNum; i++) {\n        var material = new THREE.PointsMaterial({\n          size: 2,\n          map: texture, // 纹理\n          transparent: true, // 透明\n          opacity: 1, // 透明度\n          depthTest: false, // 可以去掉texture的黑色背景\n          blending: THREE.AdditiveBlending // 融合模式\n        })\n        material.map.offset = new THREE.Vector2(1 / typeNum * i, 0)\n        material.map.repeat = new THREE.Vector2(1 / typeNum, 1)\n        materials.push(material)\n      }\n\n      // 通过自定义几何体设置粒子位置\n      var geoms = []\n      for (var k = 0; k < typeNum; k++) {\n        var geom = new THREE.Geometry()\n        for (let i = 0; i < 100; i++) {\n          // 随机生成雪花的位置\n          var v = new THREE.Vector3(\n            Math.random() * range - range / 2,\n            Math.random() * range - range / 2,\n            Math.random() * range - range / 2\n          )\n          // 随机生成雪花分别沿x、y、z轴方向移动速度\n          v.velocityY = 0.1 + Math.random() / 5\n          v.velocityX = (Math.random() - 0.5) / 3\n          v.velocityZ = (Math.random() - 0.5) / 3\n          // 添加顶点\n          geom.vertices.push(v)\n        }\n        geoms.push(geom)\n      }\n\n      // 点云\n      var clouds = []\n      for (var i = 0; i < typeNum; i++) {\n        var points = new THREE.Points(geoms[i], materials[i])\n        clouds.push(points)\n        scene.add(points)\n      }\n\n      /* 动画 */\n      (function animate () {\n        clouds.forEach(function (points, i) {\n          var vertices = points.geometry.vertices\n\n          vertices.forEach(function (v, idx) {\n            // 计算位置\n            v.y = v.y - (v.velocityY)\n            v.x = v.x - (v.velocityX)\n            v.z = v.z - (v.velocityZ)\n\n            // 边界检查\n            if (v.y <= -range / 2) v.y = range / 2\n            if (v.x <= -range / 2 || v.x >= range / 2) v.x = v.x * -1\n            if (v.z <= -range / 2 || v.z >= range / 2) v.velocityZ = v.velocityZ * -1\n          })\n\n          // 重要：渲染时需要更新位置（如果没有设为true,则无法显示动画）\n          points.geometry.verticesNeedUpdate = true\n        })\n        renderer.render(scene, camera)\n        requestAnimationFrame(animate)\n      })()\n    }\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n@import '@/assets/style/variables.scss';\n\n.snow{\n  padding-top: 40px;\n  text-align: center;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/snow/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"snow\",attrs:{\"id\":\"snowBackground\"}})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-781b3130\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./build/loaders/theme-loader.js??ref--3-1!./src/pages/snow/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-781b3130\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!postcss-loader?{\\\"sourceMap\\\":true}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!../../../build/loaders/theme-loader.js??ref--3-1!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!../../../build/loaders/theme-loader.js??ref--3-1!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!../../../build/loaders/theme-loader.js??ref--3-1!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-781b3130\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!../../../build/loaders/theme-loader.js??ref--3-1!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-781b3130\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/snow/index.vue\n// module id = null\n// module chunks = ","/**\n * @file index router\n * @author linliu21\n */\nimport Index from './index.vue'\n\nexport default {\n  routes: [\n    {\n      path: '/',\n      name: 'index',\n      component: Index\n    }\n  ]\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/snow/router.js","import {createApp} from '@/app'\r\nimport pageRouter from './router'\r\n\r\nconst {app, router} = createApp('index', pageRouter)\r\n\r\nrouter.onReady(() => app.$mount('#app'))\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/snow/entry.js"],"sourceRoot":""}